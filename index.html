<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ReQuiz | Home</title>
    <link rel="icon" href="resources/requiz-icon.png">
    <link rel="stylesheet" href="resources/base-styles.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;500;900&display=swap">

    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.17.1/firebase-database.js"></script>

    <style>

      .content-welcome {
        max-width: 750px;
      }

    </style>
  </head>
  <body>

    <div class="header">
      <div class="header-title">
        <div class="header-logo-container"><img class="header-logo" src="resources/requiz-icon.png"></div>
        <div class="header-text-container"><h1 class="header-text">ReQuiz</h1></div>
      </div>
      <div class="header-links">
        <div class="dropdown-container">
          <div class="dropdown"><div class="dropdown-text">Quizzes</div><div class="down-arrow"></div></div>
          <div class="spacer"></div>
          <div class="dropdown-list">
            <div class="dropdown-item" id="dropdown-item-new-quiz">Quiz Editor</div>
            <div class="spacer"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="content">
      <div class="content-welcome">
        <h1>Welcome to ReQuiz!</h1>
        <p>Check out a list of all the quizzes on this site by selecting the "Quizzes" dropdown in the header, or view the most recent quizzes below!</p>
        <p>V1.0.1</p>
      </div>
    </div>

    <div class="footer">

    </div>

    <script>

      // Firebase Configuration:
      var firebaseConfig = {
        apiKey: "AIzaSyBrg6aS2Guc3b4pnmt7hYVdJ7pQY-DS61E",
        authDomain: "ss-requiz.firebaseapp.com",
        databaseURL: "https://ss-requiz.firebaseio.com",
        projectId: "ss-requiz",
        storageBucket: "ss-requiz.appspot.com",
        messagingSenderId: "1058999305226",
        appId: "1:1058999305226:web:7fd71e16621777c75b4bf3"
      };

      firebase.initializeApp(firebaseConfig);

      let database = firebase.database();

      let ref = {
        quizzes: database.ref("quizzes")
      };

      window.addEventListener("load", function() {
        ref.quizzes.once("value", function(data) {
          let d = data.val();

          for (let i in d) {
            let el = document.createElement("div");
            el.innerHTML = `<div class="dropdown-item" class="dropdown-item" onclick="openQuiz('${i}')">${d[i].name}</div>`;
            document.getElementsByClassName("dropdown-list")[0].appendChild(el);
          }
        });
      });

      function openQuiz(i) {
        window.open("https://quiz.simplexshotz.tk/quiz/index.html?quiz=" + i, "_self");
      }

      document.getElementsByClassName("dropdown")[0].addEventListener("click", function() {
        toggle("down-arrow");
        toggle("dropdown-list");
        toggle("dropdown-container");
      });

      document.getElementById("dropdown-item-new-quiz").addEventListener("click", function() {
        window.open("https://quiz.simplexshotz.tk/quiz-creator/index.html", "_self");
      });

      function toggle(cl) {
        let el = document.getElementsByClassName(cl)[0];

        let clA = cl + "-active";
        if (el.classList.contains(clA)) {
          el.classList.remove(clA);
        } else {
          el.classList.add(clA);
        }

      }

    </script>
  </body>
</html>
